<!DOCTYPE html>
<html>

<head>
	<base href="/" />
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Замовлення PodHub | Vape shop - вейпи, PODіки, картриджі, рідини та більше</title>
	<meta itemprop="name" content="Замовлення PodHub | Vape shop - вейпи, PODіки, картриджі, рідини та більше" />
	<meta name="twitter:title" content="Замовлення PodHub | Vape shop - вейпи, PODіки, картриджі, рідини та більше" />
	<meta property="og:title" content="Замовлення PodHub | Vape shop - вейпи, PODіки, картриджі, рідини та більше" />

	<meta name="description" content="Зручно керуйте обраними товарами у вашому кошику. Змінюйте кількість, переглядайте підсумкову вартість та легко оформляйте замовлення онлайн. Швидка доставка по всій Україні Новою поштою." />
	<meta itemprop="description" content="Зручно керуйте обраними товарами у вашому кошику. Змінюйте кількість, переглядайте підсумкову вартість та легко оформляйте замовлення онлайн. Швидка доставка по всій Україні Новою поштою." />
	<meta name="twitter:description" content="Зручно керуйте обраними товарами у вашому кошику. Змінюйте кількість, переглядайте підсумкову вартість та легко оформляйте замовлення онлайн. Швидка доставка по всій Україні Новою поштою." />
	<meta property="og:description" content="Зручно керуйте обраними товарами у вашому кошику. Змінюйте кількість, переглядайте підсумкову вартість та легко оформляйте замовлення онлайн. Швидка доставка по всій Україні Новою поштою." />

	<meta itemprop="image" content="https://podhubvape.shop/img/bull.image.jpg" />
	<meta name="twitter:image:src" content="https://podhubvape.shop/img/bull.image.jpg" />
	<meta property="og:image" content="https://podhubvape.shop/img/bull.image.jpg" />

	<link rel="icon" type="image/x-icon" href="img/favicon.jpg" />
	<meta name="keywords" content="waw, web art work, server render, template" />

	<link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700&display=swap" rel="stylesheet" />


	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-icons.css" rel="stylesheet">

	<link rel="stylesheet" href="css/slick.css" />

	<link href="css/tooplate-little-fashion.css" rel="stylesheet">
	<link rel="stylesheet" href="css/index.css" />
	<style>
		:root {
			--primary_color: {
					{
						{
						variables.primary_color || "#e0dc10"
					}
				}
			}

			;
		}

	</style>
</head>

<body>
	<main>
		<nav class="navbar navbar-expand-lg">
			<div class="container">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<a href="/">
					<img src="img/befflogo.png" width="80px">
				</a>

				<div class="d-lg-none">
					<a href="tel:+380930935126" class="bi-phone custom-icon me-3"></a>

					<a href="product-detail.html" class="bi-bag custom-icon"></a>
				</div>

				<div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav mx-auto">
						<li class="nav-item">
							<a class="nav-link active" href="/">Головна</a>
						</li>

						<li class="nav-item">
							<a class="nav-link" href="/shop">Магазин</a>
						</li>

						<li class="nav-item">
							<a class="nav-link" href="/blog">Блог</a>
						</li>

						<li class="nav-item">
							<a class="nav-link" href="/contact">Контакти</a>
						</li>
					</ul>

					<div class="d-none d-lg-block">
							<a href="tel:+380930935126" class="bi-phone custom-icon me-3"></a>

						<a href="product-detail.html" class="bi-bag custom-icon"></a>
					</div>
				</div>
			</div>
		</nav>
		<div class="hero-wrap hero-bread" style="background-image: url('img/smoke.jpg')">
	<div class="container">
		<div class="row no-gutters slider-text align-items-center justify-content-center">
			<div class="col-md-9 ftco-animate text-center">
				<!-- <p class="breadcrumbs">
					<span class="mr-2"><a href="index.html">Home</a></span>
					<span>Розрахуватись</span>
				</p> -->
				<h1 class="mb-0 bread">Замовлення</h1>
			</div>
		</div>
	</div>
</div>

<section class="ftco-section">
	<div class="container">
		<div class="row">
			<div class="col-md-12 ftco-animate">
				<div class="cart-list">
					<table class="table">
						<thead class="thead-primary">
							<tr class="text-center">
								<th>Фото</th>
								<th>Товар</th>
								<th>Ціна</th>
								<th>Кількість</th>
								<th>Сумарно</th>
								<th>Комент</th>
								<th>&nbsp;</th>
							</tr>
						</thead>
						<tbody id="orderTableBody"></tbody>
					</table>
				</div>
			</div>
		</div>

		<div class="row justify-content-center mt-5">
			<div class="col-xl-7 ftco-animate">
				<form id="billing-form" class="billing-form">
					<h3 class="mb-4 billing-heading">Реквізити</h3>
					<div class="row align-items-end">
						<div class="col-md-6">
							<div class="form-group">
								<label for="firstname">Ім'я</label>
								<input type="text" class="form-control" id="firstname" required />
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="lastname">Прізвище</label>
								<input type="text" class="form-control" id="lastname" required />
							</div>
						</div>
						<div class="w-100"></div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="towncity">Населений пункт</label>
								<input type="text" class="form-control" id="towncity" required />
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="postcodezip">Номер Нової пошти</label>
								<input type="text" class="form-control" id="postcodezip" required />
							</div>
						</div>
						<div class="w-100"></div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="phone">Телефон</label>
								<input type="text" class="form-control" id="phone" required />
							</div>
						</div>
						<div class="col-md-6">
							<div class="form-group">
								<label for="emailaddress">Електорнна адреса</label>
								<input type="email" class="form-control" id="emailaddress" required />
							</div>
						</div>
					</div>
					<button type="submit" class="btn btn-primary py-3 px-4">
						Замовити
					</button>
				</form>
			</div>
			<div class="col-xl-5">
				<div class="row mt-5 pt-3">
					<div class="col-md-12 d-flex mb-5">
						<div class="cart-detail cart-total p-3 p-md-4">
							<h3 class="billing-heading mb-4">Кошик</h3>
							<p class="d-flex total-price">
								<span>Сумарно</span>
								<span id="allTotal"></span>
							</p>
							<hr />
						</div>
					</div>
				</div>
			</div>
			<!-- .col-md-8 -->
		</div>
	</div>
</section>

<script type="module">
	function loadOrder() {
		let order = localStorage.getItem("order");
		if (order) {
			document.getElementById("cartCounter").innerHTML = (
				JSON.parse(order).products || []
			).length.toString();
			return JSON.parse(order);
		} else {
			// If no order exists, initialize an empty order
			return { products: [] };
		}
	}

	// Function to save order info to local storage
	function saveOrder(order) {
		document.getElementById("cartCounter").innerHTML = (
			order.products || []
		).length.toString();
		localStorage.setItem("order", JSON.stringify(order));
	}
	const total = (order) => {
		return (
			order.products.reduce((total, item) => {
				return total + item.data.price * item.quantity;
			}, 0) + " грн"
		);
	};
	document.addEventListener("DOMContentLoaded", function () {
		const order = loadOrder();
		const tableBody = document.getElementById("orderTableBody");
		tableBody.innerHTML = ""; // Clear existing table rows

		order.products.forEach((product) => {
			const row = document.createElement("tr");
			row.id = "productId" + product.data._id;
			row.className = "text-center";

			row.innerHTML = `
	           <td class="image-prod">
	               <div class="img" style="background-image: url(${product.data.thumb
				});"></div>
	           </td>
	           <td class="product-name">
	               <h3>${product.data.name}</h3>
	           </td>
	           <td class="price">${product.data.price.toFixed(2)} грн</td>
	           <td class="quantity">
	               <div class="input-group mb-3">
	                   <input type="number" name="quantity" class="quantity form-control input-number changeQuantity" value="${product.quantity
				}" min="1" max="100" product='${JSON.stringify(
					product
				)}' />
	               </div>
	           </td>
	           <td class="total" id="total${product.data._id}">${(
					product.data.price * product.quantity
				).toFixed(2)} грн</td>
	           <td class="product-remove">
	               <div class="input-group mb-3">
	                   <input type="string" name="comment" class="quantity form-control changeComment" value="${product.comment || ""
				}" product='${JSON.stringify(
					product
				)}' placeholder='' />
	               </div>
	           </td>
	           <td class="product-remove">
	               <span class="ion-ios-close removeProduct" product='${JSON.stringify(
					product
				)}'></span>
	           </td>
	       `;
			tableBody.appendChild(row);
		});
		document.getElementById("allTotal").innerHTML =
			order.products.reduce((total, item) => {
				return total + item.data.price * item.quantity;
			}, 0) + " грн";

		let buttons = document.querySelectorAll(".removeProduct");
		const clicked = (button) => {
			return () => {
				const product = JSON.parse(button.getAttribute("product"));
				order.products = order.products.filter(
					(p) => p.id !== product.data._id
				);
				saveOrder(order);
				let row = document.getElementById(`productId${product.data._id}`);
				if (row) {
					row.remove();
				}
			};
		};
		buttons.forEach(function (button) {
			button.addEventListener("click", clicked(button));
		});

		let inputs = document.querySelectorAll(".changeQuantity");
		const changed = (input) => {
			return () => {
				const product = JSON.parse(input.getAttribute("product"));
				const getProduct = order.products.find(
					(p) => p.data._id === product.data._id
				);
				getProduct.quantity = Number(input.value);
				saveOrder(order);
				document.getElementById("total" + product.data._id).innerHTML =
					(product.data.price * Number(input.value)).toFixed(2) + " грн";
				document.getElementById("allTotal").innerHTML = total(order);
			};
		};
		inputs.forEach(function (input) {
			input.addEventListener("change", changed(input));
		});

		let cinputs = document.querySelectorAll(".changeComment");
		const cchanged = (input) => {
			return () => {
				const product = JSON.parse(input.getAttribute("product"));
				const getProduct = order.products.find(
					(p) => p, data._id === product.data._id
				);
				getProduct.comment = input.value;
				saveOrder(order);
			};
		};
		cinputs.forEach(function (input) {
			input.addEventListener("change", cchanged(input));
		});
	});

	const id = () => {
		const now = new Date();
		const year = now.getFullYear().toString().slice(-2); // Short year
		const month = (now.getMonth() + 1).toString().padStart(2, "0"); // Month (0-indexed, so add 1)
		const date = now.getDate().toString().padStart(2, "0"); // Date
		const hours = now.getHours().toString().padStart(2, "0"); // Hours
		const minutes = now.getMinutes().toString().padStart(2, "0"); // Minutes

		return `${year}-${month}-${date} ${hours}:${minutes}`;
	};
	const productsText = () => {
		const order = loadOrder();
		let text = "===================\n";
		for (const product of order.products) {
			text += `Товар: ${product.data.name}\nЦіна: ${product.data.price} грн\nКількість: ${product.quantity}\nКоммент: ${product.comment}\n===================\n`;
		}
		text += `Все разом: ${total(order)}\n`;
		return text;
	};

	let submited = false;
	document
		.getElementById("billing-form")
		.addEventListener("submit", function (event) {
			event.preventDefault();
			if (submited) {
				return;
			}
			submited = true;

			const firstname = document.getElementById("firstname").value;
			const lastname = document.getElementById("lastname").value;
			const towncity = document.getElementById("towncity").value;
			const postcodezip = document.getElementById("postcodezip").value;
			const phone = document.getElementById("phone").value;
			const emailaddress = document.getElementById("emailaddress").value;

			if (
				firstname &&
				lastname &&
				towncity &&
				postcodezip &&
				phone &&
				emailaddress
			) {
				const order = loadOrder();
				const data = {
					products: order.products.map((product) => ({
						product: product.data._id,
						productquantity: product.data.productquantity || null,
						quantity: product.quantity,
					})),
					commerce: "674d9cbe7f4e98c4f2482a20",
					delivery: {
						firstname,
						lastname,
						city: towncity,
						postoffice: postcodezip,
						phone,
						email: emailaddress,
					},
				};

				fetch("https://webart.work/api/commerce/order/create", {
					method: "POST",
					headers: {
						"Content-Type": "application/json",
					},
					body: JSON.stringify(data),
				})
					.then((response) => response.json())
					.then((data) => {
						localStorage.removeItem("order");
						alert("замовлення прийнято");
						window.location.href = "/";
					})
					.catch((error) => {
						console.error("Error:", error);
					});
			} else {
				alert("Заповніть всі поля");
			}
		});
</script>
	</main>
	
	<footer class="site-footer">
		<div class="container">
			<div class="row">
				
				<div class="col-lg-3 col-4 me-auto mb-4">
					<h4 class="text-white mb-3"><a href="index.html"><span class="pod">POD</span><span class="hub"> HUB</span></h4>
					
						<p class="copyright-text">Copyright © <a href="https://podhubvape.shop/" target="_blank">POD HUB</a></p>
					</div>
					<div class="col">
						<h5 class="text-white mb-3">Навігація</h5>
				
						<ul class="footer-menu d-flex">
							<li class="footer-menu-item"><a href="/" class="footer-menu-link">Головна</a></li>

							<li class="footer-menu-item"><a href="/shop" class="footer-menu-link">Магазин</a></li>
				
							<li class="footer-menu-item"><a href="/blog" class="footer-menu-link">Блог</a></li>
				
							<li class="footer-menu-item"><a href="/contact" class="footer-menu-link">Контакти</a></li>
				
						</ul>
					</div>
				
					<div class="col-lg-3 col-4">
						<h5 class="text-white mb-3">Social</h5>
				
						<ul class="social-icon">
				
							<li><a href="#" class="social-icon-link bi-youtube"></a></li>
				
							<li><a href="#" class="social-icon-link bi-whatsapp"></a></li>
				
							<li><a href="#" class="social-icon-link bi-instagram"></a></li>
				
							<li><a href="#" class="social-icon-link bi-skype"></a></li>
						</ul>
					</div>
				
				</div>


				<div class="row">
					<h5 class="text-white">Наші адреси</h5>
				<div class="col-lg-6 col-4 me-auto mb-6">
					<ul>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/CA6dnBYgmKr2t8Dz5"><span class="text">вулиця Київська, 1А,
								Жмеринка, Вінницька область, 23100</span></a>
						</li>
						<br>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/CryC4BBHLAHSXbzP7"><span class="text">вулиця Героїв Небесної
								сотні, 1А, Кам'янець-Подільський, Хмельницька область, 32301</span></a>
						</li>
						<br>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/cJTyX8UBxPdv6SKd6"><span class="text">вулиця Миру, 4, Кам'янець-Подільський,
								Хмельницька область, 32327</span></a>
						</li>
						<br>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/jN5HUgvP8UK7UG2s8"><span class="text">Немирівське шосе, 94Е,
								Вінниця, Вінницька область, 21006</span></a>
						</li>
						<br>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/Gyy69zQRHaWpAwyq7"><span class="text">вулиця Святого Миколая, Бар, Вінницька
								область, 23000</span></a>
							</li>
					</ul>
				</div>
				<div class="col-lg-6 col-4 me-auto mb-6">
					<ul>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/JK6ERQRKBdUrknueA"><span class="text">вулиця Петра Болбочана,
								1, Хмельницький, Хмельницька область, 29000</span></a>
						</li>
						<br>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/BMNJbwduV5UFTrCY7"><span class="text">вулиця Житомирська,
								23А, Бердичів, Житомирська область, 13300</span></a>
						</li>
						<br>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/N7ZgfFswt7QEPHqFA"><span class="text">вулиця Європейська, 99,
								Бердичів, Житомирська область, 13300</span></a>
						</li>
						<br>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/gupNLGLmGxrHHBKA7"><span class="text">вулиця Незалежності, 9/8, Умань, Черкаська
								область, 20300</span></a>
						</li>
						<br>
						<li class="footer-menu-item">
							<a href="https://maps.app.goo.gl/ZRhnyQc9gBvbsAzA8"><span class="text">вулиця Європейська, 29, Умань, Черкаська
								область, 20300</span></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>


	<script src="js/commerceproduct.js" type="module"></script>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>
	<script src="js/Headroom.js"></script>
	<script src="js/jQuery.headroom.js"></script>
	<script src="js/slick.min.js"></script>
	<script src="js/custom.js"></script>
</body>

</html>
